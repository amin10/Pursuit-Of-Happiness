<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pursuit of Happiness</title>
  <meta charset="utf-8">
   <meta name="viewport" content="initial-scale=2.0, user-scalable=no">

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">

    <style type="text/css">

    html, body, #wrapper{
    height: 100%;
    width: 100%;
     }
    #map-canvas{
        position: absolute;
        top: 0pt;
        left: 0;
        bottom: 0;
        right: 0;
    }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxif6DsCvG0_9W3yYk2XQ4D1NN9VWg2wE">
    </script>
    <script type="text/javascript">
       $( document ).ready(function() {
           active = true;
	         numClicks = 0;
           $("#second").hide();

           $('#second').click(function() {
               console.log('happens')
               if (numClicks  == 2) {
                  location.reload();
                }
           });
           $('#adv').keypress(function(e){
                 if (e.keyCode == 13) {
                     adventure = $('#adv').val()
                 }
             });
       });
      function initialize() {
         getMap();
         addClickListener();
      }
      google.maps.event.addDomListener(window, 'load', initialize); 
      addClickListener();
        //creates video game interface
      function getMap() {
        var mapOptions = {
          center: { lat: 42.358263, lng: -71.054020},
          zoom: 14
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        return map;
      }
      $('#second').click(function () {
          if (numClicks % 2 == 2) {
             var m = getMap();
             numClicks++;
          }
      }); 
      function addClickListener() {
        var map = getMap();
           google.maps.event.addListener(map, 'click', function(event){                                                                                                                                                          

       if (numClicks == 0 ) {
           startLat = event.latLng.lat();
           startLong = event.latLng.lng()
           numClicks++;
           $("#second").show();
           $("#first").hide();
       } else if (numClicks == 1) {
           endLat = event.latLng.lat();
           endLong = event.latLng.lng();
           numClicks++;
           clicked_coordinates =[[startLat,startLong],[endLat,endLong]]
           $('#second').html("Here is the route of your dreams. Click again HERE to discover another!");
           process();
          }
         }); 
      } 
    </script>
    <script src = "http://maps.google.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script src = "alg.js"> </script> 
<script>
         
        function process() {
            var coordinates = clicked_coordinates;
            var loc = coordinates[0];
            var des = coordinates[1];
            var relevantDataPoints2= [[42.3470993, -71.0884, 0.7063], [42.35136795, -71.040491, 1.2508], [42.34384918, -71.07186389, 1.2649], [42.34650803, -71.08659891, 0.7175], [42.35136795, -71.040491, 1.2508], [42.35136795, -71.040491, 1.2508], [42.34824371, -71.08347416, 1.4232], [42.34723282, -71.0959756, 1.271], [42.40842819, -71.0536625, 1.4126], [42.35430908, -71.07996298, 1.2674], [42.34976578, -71.082809, 1.5518], [42.34292603, -71.08574507, 0.7166], [42.34051514, -71.126409, 1.739796021], [42.36768341, -71.0762691, 0.611601203], [42.34650803, -71.0972024, 1.54543671], [42.3490181, -71.09144615, 0.674280153], [42.34897614, -71.13748267, 0.58990174], [42.34650803, -71.0972024, 1.526837307], [42.35446167, -71.13070208, 1.833833063], [42.34727478, -71.07960114, 1.853836055], [42.3541832, -71.05326562, 1.74755843], [42.35611725, -71.0552516, 0.693793605], [42.34650803, -71.0972024, 1.64452253], [42.35931015, -71.02705047, 1.48306308], [42.36564636, -71.05335066, 1.569969121], [42.37260056, -71.084851, 0.608079234], [42.36500168, -71.10361111, 1.557654619], [42.34468079, -71.09821715, 1.430158698], [42.34650803, -71.0972024, 1.631816787], [42.35829926, -71.0661, 1.090985604], [42.34650803, -71.0972024, 1.340518733], [42.34650803, -71.0972024, 1.874813366], [42.35379791, -71.1370304, 1.578465389], [42.3610611, -71.0844008, 1.54543671], [42.34650803, -71.0972024, 1.652012454], [42.28894424, -71.13570037, 0.560550708], [42.35842896, -71.0597732, 1.681152], [42.35176849, -71.061378, 1.611868009], [42.34885788, -71.13361579, 1.715567252], [42.35842896, -71.0597732, 1.681152], [42.35439682, -71.06236537, 0.608079234], [42.34880066, -71.0953601, 1.715567252], [42.33461761, -71.05125999, 0.655839842], [42.34554291, -71.09767704, 0.545305906], [42.35611725, -71.0552516, 0.693793605], [42.35611725, -71.0552516, 0.693793605], [42.35485458, -71.0661193, 1.519569529], [42.35411072, -71.069942, 1.689973133], [42.27686691, -71.1498409, 0.674280153], [42.34078979, -71.15338276, 0.617236808], [42.35524368, -71.06724067, 1.652012454], [42.35775757, -71.05323508, 1.48306308], [42.35411072, -71.069942, 1.833833063], [42.34693146, -71.09732107, 1.689973133], [42.35611725, -71.0552516, 0.608079234], [42.28680038, -71.064762, 1.118754846], [42.34850311, -71.1305388, 1.816928297], [42.34650803, -71.0972024, 0.59943303], [42.36383057, -71.10144819, 0.647066291], [42.34923553, -71.138639, 1.526837307], [42.36500168, -71.10361111, 1.48306308], [42.34069443, -71.069344, 1.48306308], [42.34650803, -71.0972024, 1.689973133], [42.34662628, -71.09732737, 1.441350846], [42.34384918, -71.07186389, 1.448149016], [42.34650803, -71.0972024, 1.837057691], [42.35174179, -71.0327695, 1.450714657], [42.35112, -71.10881042, 1.689973133], [42.34650803, -71.0972024, 0.608079234], [42.35842896, -71.0597732, 1.519569529], [42.28905487, -71.067378, 1.689973133], [42.35971832, -71.05360491, 1.591107209], [42.35842896, -71.0597732, 1.681152], [42.34643936, -71.0973039, 1.714735724], [42.33026123, -71.09891199, 1.64452253], [42.34650803, -71.0972024, 1.731875478], [42.33927917, -71.09425492, 1.526837307], [42.34860992, -71.04199661, 1.317662517], [42.35842896, -71.0597732, 1.681152], [42.35059357, -71.08421962, 1.569969121], [42.34723282, -71.0959756, 0.558423819], [42.35932922, -71.06455994, 1.48306308], [42.28905487, -71.067378, 1.795744337], [42.28323746, -71.03692722, 0.693793605], [42.34823227, -71.12454669, 1.037405288], [42.34849548, -71.1087756, 1.64452253], [42.35912704, -71.0879082, 1.132634333], [42.37348557, -71.09860828, 1.596086919], [42.34446335, -71.10163543, 1.64452253], [42.34569931, -71.079, 1.739796021], [42.35611725, -71.0552516, 1.58108245], [42.35842896, -71.0597732, 1.579004263], [42.34650803, -71.0972024, 1.48306308], [42.35430908, -71.07996298, 1.652012454], [42.34650803, -71.0972024, 1.652012454], [42.33451843, -71.07288439, 1.731875478], [42.2929306, -71.074755, 1.74755843], [42.34650803, -71.0972024, 1.374336323], [42.35096741, -71.07795714, 1.64452253], [42.34977341, -71.13054039, 1.624522458], [42.34410858, -71.043968, 1.54543671], [42.35267639, -71.1319633, 1.853836055], [42.34650803, -71.0972024, 1.693896322], [42.34934235, -71.09512058, 0.608079234], [42.36526489, -71.1036828, 0.756757126], [42.3428421, -71.085689, 1.756812401], [42.34723282, -71.0959756, 0.647066291], [42.33927917, -71.09425492, 1.526837307], [42.35611725, -71.0552516, 1.795744337], [42.35333633, -71.06259437, 0.572226933], [42.35039902, -71.0651, 1.715567252], [42.35924911, -71.05597936, 1.441350846], [42.3428421, -71.085689, 1.777003199], [42.35401535, -71.062105, 1.652012454], [42.35842896, -71.0597732, 1.681152], [42.35921478, -71.05001014, 1.88001715], [42.29400635, -71.04636424, 0.629798394], [42.36205292, -71.05199303, 1.206066117], [42.35398483, -71.06233284, 1.321427926], [42.3470993, -71.0884, 0.7063], [42.35136795, -71.040491, 1.2508], [42.34384918, -71.07186389, 1.2649], [42.34650803, -71.08659891, 0.7175], [42.35136795, -71.040491, 1.2508], [42.35136795, -71.040491, 1.2508], [42.34824371, -71.08347416, 1.4232], [42.34723282, -71.0959756, 1.271], [42.40842819, -71.0536625, 1.4126], [42.35430908, -71.07996298, 1.2674], [42.34976578, -71.082809, 1.5518], [42.34292603, -71.08574507, 0.7166], [42.35718155, -71.05125556, 1.569969121], [42.36097336, -71.05118947, 1.769884325], [42.33647919, -71.07696237, 0.608079234], [42.36295319, -71.09171997, 1.62079637], [42.34827423, -71.12440308, 1.321427926], [42.35340118, -71.07022694, 0.756757126], [42.37490082, -71.0891, 1.48306308], [42.3444519, -71.044884, 1.569969121], [42.35611725, -71.0552516, 0.608079234], [42.34916687, -71.08416667, 1.803859016], [42.36116409, -71.06397611, 1.668243073], [42.36670685, -71.099174, 1.74755843], [42.34650803, -71.0972024, 1.569969121], [42.35779953, -71.0617, 0.735271723], [42.3508873, -71.06485389, 1.74755843], [42.3361969, -71.04374637, 1.842067527], [42.33613586, -71.04383689, 0.663077459], [42.34161377, -71.06883097, 0.655839842], [42.35612106, -71.0742742, 1.48306308], [42.34723282, -71.0959756, 1.64452253], [42.35676193, -71.06979477, 1.441350846], [42.36547089, -71.08232617, 1.57919119], [42.37478256, -71.089185, 1.569969121], [42.34820175, -71.12451352, 0.693793605], [42.35611725, -71.0552516, 1.69297491], [42.36030579, -71.05062861, 0.780346986], [42.28683853, -71.08638, 1.48306308], [42.34650803, -71.0972024, 1.803090913], [42.35073471, -71.06615155, 1.340518733], [42.36452103, -71.08138992, 1.49910717], [42.27920151, -71.09314258, 1.420595202], [42.34749603, -71.087925, 1.630848888], [42.34860992, -71.084122, 1.250234188], [42.36483002, -71.100424, 1.64452253], [42.35744858, -71.060756, 1.526837307], [42.35842896, -71.0597732, 1.681152], [42.3532753, -71.06327279, 1.652012454], [42.36309814, -71.10702511, 1.321427926], [42.36001587, -71.09171168, 1.605978616], [42.36307526, -71.10063769, 1.803859016], [42.34384918, -71.07186389, 1.340518733], [42.37012863, -71.07369254, 1.340518733], [42.35398483, -71.06233284, 0.584261591], [42.34723282, -71.0959756, 1.811487606], [42.33320999, -71.14582638, 1.739796021], [42.37485504, -71.08909128, 1.48306308], [42.33621216, -71.04363622, 1.731875478], [42.33927917, -71.09425492, 1.526837307], [42.33336639, -71.10670682, 0.608079234], [42.35398483, -71.06233284, 1.763740216], [42.33335876, -71.1068017, 1.605978616], [42.3430748, -71.09627619, 0.693793605], [42.3526001, -71.13882229, 1.663097399], [42.36449814, -71.08129774, 1.708737832], [42.3444519, -71.044884, 1.643393121], [42.35956955, -71.05128, 1.569969121], [42.34708023, -71.08237712, 1.652012454], [42.3512001, -71.0402, 1.646537158], [42.3512001, -71.0402, 1.651071184], [42.3512001, -71.0402, 1.458002087], [42.3512001, -71.0402, 1.725426341], [42.34999847, -71.076, 0.652293311], [42.33588791, -71.04352106, 1.670010008], [42.3512001, -71.0402, 1.422722073], [42.35329437, -71.14612579, 1.48306308], [42.3512001, -71.0402, 1.647417866], [42.34844208, -71.11928877, 1.88001715], [42.3512001, -71.0402, 1.516492676], [42.3512001, -71.0402, 1.321427926], [42.33927917, -71.09425492, 1.381630993], [42.3512001, -71.0402, 1.208550598], [42.3512001, -71.0402, 1.613823218], [42.35991669, -71.05661714, 1.655573757], [42.33927917, -71.09425492, 1.40125749], [42.34599686, -71.0870192, 1.441350846], [42.3512001, -71.0402, 0.726658172], [42.35538101, -71.06234274, 1.48306308], [42.35779953, -71.0617, 1.746696951], [42.33927917, -71.09425492, 1.526837307], [42.3512001, -71.0402, 1.715567252], [42.36002731, -71.05512286, 1.526837307], [42.36650085, -71.0908, 1.48306308], [42.3512001, -71.0402, 0.761079513], [42.36494827, -71.055107, 1.48306308], [42.35842896, -71.0597732, 1.446585748], [42.3512001, -71.0402, 0.674280153], [42.33927917, -71.09425492, 1.689973133], [42.34465027, -71.096306, 1.74755843], [42.35317993, -71.13263718, 1.441350846], [42.36650085, -71.0908, 1.321427926], [42.3571701, -71.052733, 1.321427926], [42.33702469, -71.07605916, 1.725426341], [42.34927368, -71.07957273, 1.803300339], [42.33840561, -71.14935288, 0.944972469], [42.34909058, -71.07404499, 1.724059399], [42.33702469, -71.07605916, 1.250234188], [42.35221481, -71.059059, 1.652012454], [42.35611725, -71.0552516, 0.86859399], [42.35943222, -71.09159818, 1.569969121], [42.35343933, -71.05916942, 1.526837307], [42.33702469, -71.07605916, 1.689973133], [42.36650085, -71.0908, 1.526837307], [42.35965729, -71.055946, 1.374601864], [42.35611725, -71.0552516, 0.608079234], [42.35611725, -71.0552516, 0.605322313], [42.35611725, -71.0552516, 0.761079513], [42.35611725, -71.0552516, 0.693793605], [42.35611725, -71.0552516, 0.693793605], [42.35611725, -71.0552516, 1.866906609], [42.35611725, -71.0552516, 1.547543427], [42.35611725, -71.0552516, 0.756757126], [42.35626221, -71.0625966, 1.803859016], [42.34973526, -71.05767282, 0.840128219], [42.34942627, -71.09972512, 1.360041422], [42.36869812, -71.0948, 1.586556847], [42.36458206, -71.06287818, 0.761079513], [42.35779953, -71.0617, 1.340518733], [42.33927917, -71.09425492, 1.60633559], [42.37100983, -71.10682339, 1.769884325], [42.36013412, -71.05399928, 1.635052377], [42.35611725, -71.0552516, 0.693793605], [42.36174393, -71.05705063, 0.647066291], [42.36869812, -71.0948, 1.859974995], [42.35681534, -71.051811, 1.74755843], [42.35611725, -71.0552516, 1.48306308], [42.34731674, -71.09814132, 1.48306308], [42.33927917, -71.09425492, 1.526837307], [42.34882355, -71.158282, 1.681152], [42.35221481, -71.059059, 0.756757126], [42.34997559, -71.06531504, 1.48306308], [42.35815811, -71.0585053, 1.681152], [42.35611725, -71.0552516, 1.689973133], [42.35842896, -71.0597732, 1.681152], [42.36000061, -71.055, 1.652012454], [42.3669548, -71.07495726, 1.115644764], [42.35808182, -71.14949005, 1.788701821], [42.34635162, -71.1626756, 1.446585748], [42.33779526, -71.0705763, 1.681152], [42.28905487, -71.067378, 1.548253023], [42.36622238, -71.05746351, 1.64452253]];


var datapoints = relevantDataPoints2 /*.concat(huge_set) */;

 //   csv.replace('/\r?\n|\r/','');
 //   arr = csv.split(',');
 //   Array.prototype.chunk = function(chunkSize){
 //     var array = this;
 //     return [].concat.apply([],
 //        array.map(function(elem, i) {
 //             return i%chunkSize ? [] : [array.slice(i, i+chunkSize)];
	// })
	// );
	// }
    //datapoints = arr.chunk(3);            
    //datapoints = $.csv.toArray(csv);
  if(active){
		  active = false;
	    var points = alg(coordinates[0],coordinates[1], datapoints, adventure);
	    displayOnMap(points);
  }
}	
       
	
    function displayOnMap(points) {
        var map = getMap()
    //var points = [[42.3351, -71.1704],[42.3496,-71.0997],[42.3598,-71.0921]];
    var pathCoordinates = [];
    for (var i = 0; i < points.length; i++) {
          pathCoordinates.push(new google.maps.LatLng(points[i][0], points[i][1]));
    }
    var fullBounds = new google.maps.LatLngBounds();
    fullBounds.extend(pathCoordinates[0]);
    fullBounds.extend(pathCoordinates[points.length-1]);
    map.fitBounds(fullBounds);

    var happyPath = new google.maps.Polyline({
      path: pathCoordinates,
      geodesic: true,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2
     });
    happyPath.setMap(map);
    }

    </script>
</head>
<body>

<style>
   #wrapper { position: relative; }
   #over_map { position: absolute; top: 10px; left: 10px; z-index: 99; }
</style>

<div id="wrapper">
   <div id="map-canvas"> </div>

   <div id="over_map">
 <button  type = "button"  id = "first" style= " width:900px; font-size:33; z-index:9; color: black; background: rgba(192,192,200,0.7);" position = "relative"  class="btn btn-primary btn-lg">Click your current location</button>

 <button  type = "button"  id = "second" style= " width:900px; font-size:33; z-index:9; color: black; background: rgba(192,192,200,0.7);" position = "relative"  class="btn btn-primary btn-lg">Click your ultimate destination</button>
<div class="form-group">
  <label for="usr">Indicate your adventurousness from 1-10:</label>
  <input style = "width:200px" type="text" id = "adv" class="form-control">
</div>
   </div>
</div>



</body>

</html>

